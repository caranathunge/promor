# Test machine learning models on test data

This function can be used to predict test data using models generated by
different machine learning algorithms

## Usage

``` r
test_models(
  model_list,
  split_df,
  type = "prob",
  save_confusionmatrix = FALSE,
  file_path = NULL,
  ...
)
```

## Arguments

- model_list:

  A `model_list` object from performing `train_models`.

- split_df:

  A `split_df` object from performing `split_data`.

- type:

  Type of output. Set `type` as "prob" (default) to output class
  probabilities, and "raw" to output class predictions.

- save_confusionmatrix:

  Logical. If `TRUE`, a tab-delimited text file
  ("Confusion_matrices.txt") with confusion matrices in the long-form
  data format will be saved in the directory specified by `file_path`.
  See below for more details.

- file_path:

  A string containing the directory path to save the file.

- ...:

  Additional arguments to be passed on to
  [`predict`](https://rdrr.io/r/stats/predict.html).

## Value

- `prediction_list`: If `type = "raw"`, a list of factors containing
  class predictions for each method will be returned.

## Details

- Setting `type = "raw"` is required to obtain confusion matrices.

- Setting `type = "prob"` (default) will output a list of probabilities
  that can be used to generate ROC curves using `roc_plot`.

## See also

- `split_df`

- `train_models`

- [`predict`](https://rdrr.io/r/stats/predict.html)

- [`confusionMatrix`](https://rdrr.io/pkg/caret/man/confusionMatrix.html)

## Author

Chathurani Ranathunge

## Examples

``` r
# \donttest{
## Create a model_df object
covid_model_df <- pre_process(covid_fit_df, covid_norm_df)
#> Total number of differentially expressed proteins (8) is less than n_top.
#> None of the proteins show high pair-wise correlation.
#> 
#> No highly correlated proteins to be removed.

## Split the data frame into training and test data sets
covid_split_df <- split_data(covid_model_df)

## Fit models using the default list of machine learning (ML) algorithms
covid_model_list <- train_models(covid_split_df)
#> 
#> Running svmRadial...
#> 
#> Running rf...
#> 
#> Running glm...
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> Warning: glm.fit: algorithm did not converge
#> Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred
#> 
#> Running xgbLinear...
#> 
#> Running naive_bayes...
#> Done!

# Test a list of models on a test data set and output class probabilities,
covid_prob_list <- test_models(model_list = covid_model_list, split_df = covid_split_df)
#> 
#> Testing svmRadial...
#> 
#> Testing rf...
#> 
#> Testing glm...
#> 
#> Testing xgbLinear...
#> 
#> Testing naive_bayes...
#> 
#> Done!
# }

if (FALSE) { # \dontrun{
# Save confusion matrices in the working directory and output class predictions
covid_pred_list <- test_models(
  model_list = covid_model_list,
  split_df = covid_split_df,
  type = "raw",
  save_confusionmatrix = TRUE,
  file_path = "."
)
} # }
```
